{% extends "base.html" %}
{% load static %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>100 Second CPS Test | Ultimate Click Speed Endurance Challenge</title>
    <meta name="description" content="Test your clicking endurance with our 100-second CPS challenge. Measure your click speed over an extended period and compare with global rankings.">
    <meta name="keywords" content="100 second cps test, click endurance test, long duration cps test, clicks per second marathon, mouse stamina test, gaming endurance challenge">
    <meta name="author" content="Precision CPS Analyzer">
    <meta name="robots" content="index, follow">
    <link rel="stylesheet" href="{% static 'css/dpi_analyzer.css' %}">
    <link rel="stylesheet" href="{% static 'css/cps/100second.css' %}">
    <script src="{% static 'js/cps/100second.js' %}" defer></script>
</head>
<body class="dark-mode">
    <div class="container">
        <header class="header">
            <h1 style="color: var(--primary)">100 Second CPS Test</h1>
            <p>Ultimate endurance challenge to test your clicking stamina over 100 seconds</p>
        </header>

        <main>
            <div class="card">
                <div class="card-header">
                    <h2><i class="fas fa-hourglass-half"></i> Click Endurance Test</h2>
                </div>
                <div class="card-body">
                                                            <div class="time-links">
    <a href="{% url '1_second_mouse_cps_test' %}" class="time-link">1s</a>
    <a href="{% url '2_seconds_mouse_cps_test' %}" class="time-link">2s</a>
    <a href="{% url '5_seconds_mouse_cps_test' %}" class="time-link">5s</a>
    <a href="{% url '10_seconds_mouse_cps_test' %}" class="time-link">10s</a>
    <a href="{% url '15_seconds_mouse_cps_test' %}" class="time-link">15s</a>
    <a href="{% url '20_seconds_mouse_cps_test' %}" class="time-link">20s</a>
    <a href="{% url '30_seconds_mouse_cps_test' %}" class="time-link">30s</a>
    <a href="{% url '60_seconds_mouse_cps_test' %}" class="time-link">60s</a>
    <a href="{% url '100_seconds_mouse_cps_test' %}" class="time-link active">100s</a>
</div>
                    <div class="alert alert-info">
                        <div class="alert-icon">ðŸ’¡</div>
                        <div>
                            <strong style="color: white;">How to Use This 100-Second CPS Test:</strong>
                            <ol class="instruction-list">
                                <li>Click the test area to begin the 100-second challenge</li>
                                <li>Click as fast as you can for the full duration</li>
                                <li>Monitor your progress with the progress bar and timer</li>
                                <li>Try to maintain a consistent click rate throughout</li>
                                <li>View your detailed results and compare with global rankings</li>
                            </ol>
                        </div>
                    </div>

                    <div class="measurement-area-container">
                        <div class="cps-test-area idle" id="cps-test-area">
                            <div class="cps-status" id="cps-status">
                                <div class="cps-timer" id="cps-timer">100.0</div>
                                <div class="cps-click-counter" id="cps-clicks">Clicks: 0</div>
                                <div>Click to start endurance test</div>
                            </div>
                        </div>
                    </div>

                    <!-- Click rate display -->
                    <div class="click-rate-display" id="click-rate-display">
                        Current Rate: 0.0 CPS
                    </div>


<!-- Global Top Player Stats -->
<div class="stats-grid" id="global-top-player-stats">
    <div class="stat-card">
        <h3><i class="fas fa-crown"></i> Top Player</h3>
        <div class="stat-value" id="top-player-name">
            {% if top_player_stats %}{{ top_player_stats.name }}{% else %}--{% endif %}
        </div>
        <div class="stat-label">Global #1 Endurance Clicker</div>
    </div>
    <div class="stat-card">
        <h3><i class="fas fa-tachometer-alt"></i> Top CPS Score</h3>
        <div class="stat-value" id="top-player-cps">
            {% if top_player_stats %}{{ top_player_stats.score|floatformat:1 }} CPS{% else %}--{% endif %}
        </div>
        <div class="stat-label">Best Endurance Performance</div>
    </div>
    <div class="stat-card">
        <h3><i class="fas fa-mouse-pointer"></i> Top Player Clicks</h3>
        <div class="stat-value" id="top-player-clicks">
            {% if top_player_stats %}{{ top_player_stats.clicks }}{% else %}--{% endif %}
        </div>
        <div class="stat-label">Total Clicks in 100 Seconds</div>
    </div>
</div>

<div class="clean-divider" style="display: none;"></div>
<div class="stats-grid" id="user-test-results" style="display: none;">
    <div class="stat-card">
        <h3><i class="fas fa-user"></i> Your Position</h3>
        <div class="stat-value" id="user-position">--</div>
        <div class="stat-label">Global Ranking</div>
    </div>
    <div class="stat-card">
        <h3><i class="fas fa-tachometer-alt"></i> Your CPS Score</h3>
        <div class="stat-value" id="user-cps-score">--</div>
        <div class="stat-label">Clicks Per Second</div>
    </div>
    <div class="stat-card">
        <h3><i class="fas fa-mouse-pointer"></i> Your Total Clicks</h3>
        <div class="stat-value" id="user-total-clicks">--</div>
        <div class="stat-label">All registered clicks</div>
    </div>
</div>

<div class="stats-grid" id="advanced-stats" style="display: none;">
    <div class="stat-card">
        <h3><i class="fas fa-chart-line"></i> Peak CPS</h3>
        <div class="stat-value" id="peak-cps">--</div>
        <div class="stat-label">
            <i class="fas fa-globe-americas"></i>
            <span>Highest 1-second rate</span>
        </div>
    </div>
    <div class="stat-card">
        <h3><i class="fas fa-running"></i> Endurance Score</h3>
        <div class="stat-value" id="endurance-score">--</div>
        <div class="stat-label">
            <i class="fas fa-globe-americas"></i>
            <span>Consistency rating</span>
        </div>
    </div>
    <div class="stat-card">
        <h3><i class="fas fa-battery-full"></i> Stamina Drop</h3>
        <div class="stat-value" id="stamina-drop">--%</div>
        <div class="stat-label">
            <i class="fas fa-globe-americas"></i>
            <span>Performance decrease</span>
        </div>
    </div>
</div>

                    <div class="technique-recommendation" id="technique-recommendation" style="display: none;">
                        <h4><i class="fas fa-lightbulb"></i> Endurance Improvement Tip</h4>
                        <p id="improvement-tip">Based on your clicking pattern, we recommend focusing on maintaining a steady pace to improve your endurance score.</p>
                    </div>

                    <div class="button-group">
<button id="cps-reset-btn"
    style="background: linear-gradient(135deg, #e63946, #d90429);
           color: #fff;
           border: none;
           padding: 10px 18px;
           border-radius: 8px;
           cursor: pointer;
           font-size: 15px;
           font-weight: 600;
           display: inline-flex;
           align-items: center;
           gap: 6px;
           box-shadow: 0 4px 10px rgba(217, 4, 41, 0.4);
           transition: all 0.25s ease;"
    onmouseover="this.style.background='linear-gradient(135deg, #ff4d5a, #e63946)'; this.style.boxShadow='0 6px 14px rgba(230, 57, 70, 0.5)';"
    onmouseout="this.style.background='linear-gradient(135deg, #e63946, #d90429)'; this.style.boxShadow='0 4px 10px rgba(217, 4, 41, 0.4)';"
    onmousedown="this.style.transform='scale(0.96)';"
    onmouseup="this.style.transform='scale(1)';"
>
    <i class="fas fa-redo"></i> Reset Test
</button>
                    </div>
                </div>
            </div>

            <!-- Leaderboard Section -->
            <div class="card">
                <div class="card-header">
                    <h2><i class="fas fa-trophy"></i> 100-Second CPS Leaderboard</h2>
                </div>
                <div class="card-body">
                    <div class="leaderboard-container">
                        <table class="leaderboard">
                            <thead class="leaderboard-header">
                                <tr>
                                    <th>Rank</th>
                                    <th>Player</th>
                                    <th>CPS</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboard-content">
                                {% for score in top_scores %}
                                <tr class="leaderboard-item rank-{% if forloop.counter == 1 %}1{% elif forloop.counter == 2 %}2{% elif forloop.counter == 3 %}3{% else %}other{% endif %}">
                                    <td class="leaderboard-rank">#{{ forloop.counter }}</td>
                                    <td class="leaderboard-player">{{ score.user.username }}</td>
                                    <td class="leaderboard-score">{{ score.score|floatformat:1 }} CPS</td>
                                    <td class="leaderboard-date">{{ score.created_at|date:"M d, Y" }}</td>
                                </tr>
                                {% empty %}
                                <tr>
                                    <td colspan="4" class="no-records">No records yet. Be the first!</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        
                        {% if user.is_authenticated and user_best_score %}
                        <div class="user-best-score">
                            <h4><i class="fas fa-user"></i> Your Personal Best</h4>
                            <div class="user-score">
                                <span class="score-value">{{ user_best_score.score|floatformat:1 }} CPS</span>
                                <span class="score-rank">
                                    {% if user_rank %}
                                        <i class="fas fa-globe"></i> Global Rank: #{{ user_rank }}
                                    {% else %}
                                        Not ranked
                                    {% endif %}
                                </span>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <div class="content-section">
                        <h2><i class="fas fa-info-circle"></i> Understanding the 100-Second CPS Test</h2>
                        <p>The 100-second CPS test is designed to measure not just your raw clicking speed, but also your endurance and consistency over an extended period. This test separates casual clickers from true endurance champions.</p>
                        
                        <p>Why 100 seconds is the ultimate test of clicking stamina:</p>
                        <ul>
                            <li><strong>Endurance Measurement:</strong> Tests your ability to maintain speed over time</li>
                            <li><strong>Consistency Evaluation:</strong> Reveals how well you can sustain your performance</li>
                            <li><strong>Stamina Assessment:</strong> Measures your physical and mental endurance</li>
                            <li><strong>Real-world Application:</strong> Simulates extended gaming sessions or tasks requiring sustained clicking</li>
                        </ul>
                    </div>

                    <div class="content-section">
                        <h2><i class="fas fa-running"></i> Endurance Clicking Techniques</h2>
                        <p>Success in the 100-second test requires a different approach than short burst tests. Here's how to maximize your endurance:</p>
                        
                        <ul>
                            <li><strong>Pace Yourself:</strong> Don't start at maximum speed - find a sustainable rhythm</li>
                            <li><strong>Hand Position:</strong> Keep your hand relaxed to prevent fatigue</li>
                            <li><strong>Regular Breaks:</strong> Practice with shorter tests first and gradually increase duration</li>
                            <li><strong>Ergonomics:</strong> Ensure your mouse and seating position are comfortable</li>
                            <li><strong>Consistency:</strong> Focus on maintaining a steady click rate rather than peaks and valleys</li>
                        </ul>
                        
                        <p>Remember that endurance clicking is a marathon, not a sprint. Regular practice will improve your stamina over time.</p>
                    </div>

                    <div class="content-section">
                        <h2><i class="fas fa-medal"></i> Scoring and Rankings</h2>
                        <p>Your score is calculated as clicks per second (CPS) over the entire 100-second duration. The leaderboard ranks players based on this CPS value.</p>
                        
                        <p>What makes a good 100-second CPS score:</p>
                        <ul>
                            <li><strong>Elite:</strong> 8.0+ CPS (800+ total clicks) - Exceptional endurance and speed</li>
                            <li><strong>Advanced:</strong> 6.0-7.9 CPS (600-799 clicks) - Strong performance with good stamina</li>
                            <li><strong>Intermediate:</strong> 4.0-5.9 CPS (400-599 clicks) - Solid endurance capabilities</li>
                            <li><strong>Beginner:</strong> 2.0-3.9 CPS (200-399 clicks) - Developing endurance</li>
                            <li><strong>Novice:</strong> Below 2.0 CPS (under 200 clicks) - Needs practice building stamina</li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
    const isUserAuthenticated = {% if user.is_authenticated %}true{% else %}false{% endif %};
    </script>
</body>
</html>
{% endblock %}